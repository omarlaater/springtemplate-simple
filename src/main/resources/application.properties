# ============================================================================
# COMMON CONFIGURATION (loaded for all profiles)
# ============================================================================

# App identity
spring.application.name=spring-template-starter

# Liquibase
spring.liquibase.enabled=${LIQUIBASE_ENABLED:true}
spring.liquibase.change-log=classpath:/db/changelog/db.changelog-master.xml

# JPA
spring.jpa.open-in-view=false
spring.jpa.hibernate.ddl-auto=none
spring.jpa.properties.hibernate.format_sql=true

# Actuator
management.endpoints.web.base-path=/actuator
management.endpoints.web.exposure.include=*
management.endpoint.health.probes.enabled=true
management.endpoint.health.show-details=when_authorized
management.metrics.tags.application=${spring.application.name}
management.security.user.name=${ACTUATOR_USERNAME:actuator}
management.security.user.password=${ACTUATOR_PASSWORD:actuator-dev-password}

# Observability
# Keep tracing enabled in code, but disable OTLP export by default so local/dev
# startup does not depend on a running Jaeger/OTel collector.
# How to enable tracing with Jaeger later:
# 1) Set OTLP_TRACING_EXPORT_ENABLED=true
# 2) Set OTEL_EXPORTER_OTLP_TRACES_ENDPOINT to your OTLP HTTP trace endpoint
#    Example with OTel Collector: http://otel-collector.observability:4318/v1/traces
#    Example with Jaeger collector OTLP HTTP: http://jaeger-collector.observability:4318/v1/traces
# 3) Tune TRACING_SAMPLING (suggestion: 0.1 in production)
# 4) Metrics are separate from Jaeger; enable OTLP metrics only if a metrics pipeline exists
#    (for example, OTel Collector -> Prometheus/remote backend).
management.tracing.enabled=${TRACING_ENABLED:true}
management.tracing.sampling.probability=${TRACING_SAMPLING:1.0}
management.otlp.tracing.export.enabled=${OTLP_TRACING_EXPORT_ENABLED:false}
management.otlp.metrics.export.enabled=${OTLP_METRICS_EXPORT_ENABLED:false}

# Endpoints are environment-driven to avoid hardcoded IPs.
management.otlp.tracing.endpoint=${OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:http://localhost:4318/v1/traces}
management.otlp.metrics.export.url=${OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:http://localhost:4318/v1/metrics}

# Server
server.shutdown=graceful

# ---------------------------------------------------------------------------
# Profiles structure:
# - COMMON   -> always loaded
# - DEV      -> H2 database, debug logs, full trace
# - POSTGRES -> local PostgreSQL database
# - PROD     -> strict configuration, env vars only
#
# Profile examples:
# - mvn spring-boot:run -Dspring-boot.run.profiles=dev
# - java -jar app.jar --spring.profiles.active=dev
# - export SPRING_PROFILES_ACTIVE=dev
# ---------------------------------------------------------------------------
